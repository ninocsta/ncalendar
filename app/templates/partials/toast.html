<script>
  (function () {
    const containerId = 'toast-container';
    let container = document.getElementById(containerId);
    if (!container) {
      container = document.createElement('div');
      container.id = containerId;
      container.style.position = 'fixed';
      container.style.right = '1rem';
      container.style.bottom = '1rem';
      container.style.zIndex = 999999;
      container.style.display = 'flex';
      container.style.flexDirection = 'column';
      container.style.gap = '0.5rem';
      document.body.appendChild(container);
    }

    window.showToast = function (type = 'info', message = '', timeout = 4000) {
      const wrapper = document.createElement('div');
      wrapper.className = 'alert d-flex align-items-center justify-content-between';
      wrapper.style.minWidth = '220px';
      wrapper.style.maxWidth = '360px';

      // Visuals via Bootstrap alert classes
      if (type === 'success') {
        wrapper.classList.add('alert-success');
      } else if (type === 'error') {
        wrapper.classList.add('alert-danger');
      } else {
        wrapper.classList.add('alert-secondary');
      }

      wrapper.innerHTML = `<div style="flex:1">${message}</div>
        <button aria-label="fechar" class="btn-close ms-2" style="border:none; background:none;"></button>`;

      const btn = wrapper.querySelector('button');
      btn.addEventListener('click', () => {
        container.removeChild(wrapper);
      });

      container.appendChild(wrapper);

      setTimeout(() => {
        if (container.contains(wrapper)) container.removeChild(wrapper);
      }, timeout);
    };
  })();
</script>
